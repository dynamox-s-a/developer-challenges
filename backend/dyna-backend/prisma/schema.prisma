generator client {
  provider = "prisma-client-js" 
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement())
  name String
  email String @unique
  password String
}

model Machine {
  id Int @id @default(autoincrement())
  name String
  tipo_id_typeOfMachine Int
  status_id_machine Int
  Pmonitoramento1_sensor Int
  Pmonitoramento2_sensor Int

   typeOfMachine              TypeOfMachine @relation(fields: [tipo_id_typeOfMachine], references: [id])
  statusMachine              StatusMachine @relation(fields: [status_id_machine], references: [id])
  pontoMonitoramento1        Sensor        @relation("PontoMonitoramento1", fields: [Pmonitoramento1_sensor], references: [id])
  pontoMonitoramento2        Sensor        @relation("PontoMonitoramento2", fields: [Pmonitoramento2_sensor], references: [id])

}

model TypeOfMachine {
  id       Int       @id @default(autoincrement())
  name     String
  machines Machine[] 
}

model StatusMachine {
  id       Int       @id @default(autoincrement())
  name     String
  machines Machine[]
}

model Sensor {
  id            Int           @id @default(autoincrement())
  name          String
  tipo_id_sensor Int

  typeOfSensor  TypeOfSensor  @relation(fields: [tipo_id_sensor], references: [id])

  // Relacionamentos inversos para os pontos de monitoramento
  monitoramento1 Machine[] @relation("PontoMonitoramento1")
  monitoramento2 Machine[] @relation("PontoMonitoramento2")
}

model TypeOfSensor {
  id      Int      @id @default(autoincrement())
  nome    String
  sensors Sensor[]
}